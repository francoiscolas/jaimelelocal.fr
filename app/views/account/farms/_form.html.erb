<% content_for :head do %>
  <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyB5V1m3yWciaNyGX6XqDc2cVoN9nYujzaI&libraries=places"></script>
<% end %>
<%= form_for(@farm, url: @farm.new_record? ? user_farm_path : edit_user_farm_path) do |f| %>
  <div>
    <%= f.label :name %>
    <%= f.text_field :name, placeholder: 'Ferme de Martin', required: true %>
    <% if @farm.errors[:name].any? %>
      <p class="field_error_message"><%= @farm.errors[:name][0] %></p>
    <% end %>
  </div>
  <div>
    <div class="input-group">
      <span class="input-group-label"><%= root_url %></span>
      <%= f.text_field :url, class: 'input-group-field', placeholder: 'ferme-de-martin' %>
    </div>
    <% if @farm.errors[:url].any? %>
      <p class="field_error_message after-input-group"><%= @farm.errors[:url][0] %></p>
    <% end %>
  </div>
  <div>
    <%= f.label :shortdesc %>
    <%= f.text_area :shortdesc, rows: 2, autoresize: true, maxlength: Farm::SHORTDESC_MAX_LENGTH, required: true%>
    <% if @farm.errors[:shortdesc].any? %>
      <p class="field_error_message"><%= @farm.errors[:shortdesc][0] %></p>
    <% end %>
  </div>
  <div>
    <%= f.label :email %>
    <%= f.phone_field :email, required: true %>
    <% if @farm.errors[:email].any? %>
      <p class="field_error_message"><%= @farm.errors[:email][0] %></p>
    <% end %>
  </div>
  <div>
    <%= f.label :phone %>
    <%= f.phone_field :phone, required: true %>
    <% if @farm.errors[:phone].any? %>
      <p class="field_error_message"><%= @farm.errors[:phone][0] %></p>
    <% end %>
  </div>
  <div>
    <%= f.label :address %>
    <%= f.text_field :address, required: true %>
    <%= f.hidden_field :lat, :autocomplete => 'off' %>
    <%= f.hidden_field :lng, :autocomplete => 'off' %>
    <% if @farm.errors[:address].any? %>
      <p class="field_error_message"><%= @farm.errors[:address][0] %></p>
    <% end %>
    <div id="map"></div>
  </div>
  <div>
    <%= f.label :website %>
    <%= f.url_field :website %>
    <% if @farm.errors[:website].any? %>
      <p class="field_error_message"><%= @farm.errors[:website][0] %></p>
    <% end %>
  </div>
  <div class="actions">
    <%= f.submit "Enregistrer", class: "button" %>
  </div>
<% end %>
